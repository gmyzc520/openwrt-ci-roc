### 通用配置文件 ###
# 编译优化（降O3为O2，避免稳定性问题）
CONFIG_DEVEL=y
CONFIG_TARGET_OPTIONS=y
CONFIG_TARGET_OPTIMIZATION="-O2 -pipe -march=armv8-a+crypto+crc -mcpu=cortex-a53+crypto+crc -mtune=cortex-a53"

CONFIG_CCACHE=y
CONFIG_PACKAGE_default-settings=y
CONFIG_PACKAGE_default-settings-chn=y
CONFIG_TARGET_PER_DEVICE_ROOTFS=y
CONFIG_LUCI_LANG_zh_Hant=y

# 启用NSS相关Feed（SQM-NSS核心依赖，必须取消注释）
CONFIG_FEED_nss_packages=y
CONFIG_FEED_sqm_scripts_nss=y
# 禁用Initramfs（仅生产固件，减少冗余）
# CONFIG_TARGET_ROOTFS_INITRAMFS is not set

# USB驱动（仅保留适配IPQ6010的核心）
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-usb-xhci=y
CONFIG_PACKAGE_usb-modeswitch=y

# ZRAM虚拟内存（512M内存刚需，补充核心驱动）
CONFIG_PACKAGE_zram-swap=y
CONFIG_PACKAGE_kmod-lib-lz4=y
CONFIG_KERNEL_ZRAM_BACKEND_LZ4=y
CONFIG_KERNEL_ZRAM_DEF_COMP_LZ4=y
CONFIG_PACKAGE_kmod-zram=y

# 系统工具（核心内置，非刚需设为m）
CONFIG_PACKAGE_tmux=y
CONFIG_PACKAGE_dmesg=m
CONFIG_PACKAGE_htop=m
CONFIG_PACKAGE_btop=m
CONFIG_PACKAGE_fdisk=y
CONFIG_PACKAGE_cfdisk=y
CONFIG_PACKAGE_sgdisk=y
CONFIG_PACKAGE_tune2fs=y
CONFIG_PACKAGE_ariang=y
CONFIG_PACKAGE_fstrim=y
CONFIG_PACKAGE_nano-full=y
CONFIG_PACKAGE_autocore=m
CONFIG_PACKAGE_coremark=m
CONFIG_PACKAGE_hdparm=m
CONFIG_PACKAGE_smartmontools-drivedb=m
CONFIG_PACKAGE_zoneinfo-asia=y
#CONFIG_PACKAGE_acme-acmesh-dnsapi=y
#CONFIG_PACKAGE_openssh-sftp-server=m
#CONFIG_PACKAGE_ddns-scripts-cloudflare=m

# NSS硬件加速SQM（核心）
CONFIG_PACKAGE_sqm-scripts-nss=y  
# LuCI主题（二选一，保留argon更主流）
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y
# CONFIG_PACKAGE_luci-theme-aurora is not set
# CONFIG_PACKAGE_luci-app-aurora-config is not set

# LuCI应用（精简冗余，补充依赖）
CONFIG_PACKAGE_luci-app-cpufreq=m
#CONFIG_PACKAGE_luci-app-ddns=m
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_luci-app-upnp=m
CONFIG_PACKAGE_luci-app-wolplus=m
CONFIG_PACKAGE_luci-app-samba4=m
CONFIG_PACKAGE_luci-app-vlmcsd=m
CONFIG_PACKAGE_luci-app-aria2=y
CONFIG_PACKAGE_luci-app-autoreboot=y
CONFIG_PACKAGE_luci-app-wifischedule=m
CONFIG_PACKAGE_luci-app-uhttpd=y
#CONFIG_PACKAGE_luci-app-frps=m
#CONFIG_PACKAGE_luci-app-frpc=m
CONFIG_PACKAGE_luci-app-diskman=y
#CONFIG_PACKAGE_luci-app-hd-idle=m
CONFIG_PACKAGE_luci-app-banip=y
#CONFIG_PACKAGE_luci-app-acme=m
CONFIG_PACKAGE_luci-app-arpbind=y
CONFIG_PACKAGE_luci-app-usb-printer=m
CONFIG_PACKAGE_luci-app-oaf=m

# SQM核心界面（配合sqm-scripts-nss）
CONFIG_PACKAGE_luci-app-sqm=m  
CONFIG_PACKAGE_luci-proto-wireguard=y
#CONFIG_PACKAGE_luci-app-wechatpush=m
#CONFIG_PACKAGE_luci-app-watchcat=m
#CONFIG_PACKAGE_luci-app-3cat=m
CONFIG_PACKAGE_luci-app-smartdns=m
CONFIG_PACKAGE_luci-app-openlist2=m
CONFIG_PACKAGE_luci-app-athena-led=m
CONFIG_PACKAGE_luci-i18n-athena-led-zh-cn=m
CONFIG_PACKAGE_luci-app-lucky=m
CONFIG_PACKAGE_lucky=m

# Docker全套（补充核心依赖docker=m）
CONFIG_PACKAGE_luci-app-dockerman=m
CONFIG_PACKAGE_dockerd=m
CONFIG_PACKAGE_docker=m
CONFIG_PACKAGE_luci-lib-docker=m
CONFIG_PACKAGE_docker-compose=m

# openlist2依赖（关闭默认dnsmasq，避免冲突）
CONFIG_PACKAGE_dnsmasq-full=m
# CONFIG_PACKAGE_dnsmasq is not set

# Alist核心依赖（无空格，纯格式）
CONFIG_PACKAGE_wget=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_unzip=y
CONFIG_PACKAGE_zip=y
CONFIG_PACKAGE_libopenssl=y
CONFIG_PACKAGE_libopenssl-conf=y
CONFIG_PACKAGE_libstdcpp=y
CONFIG_PACKAGE_coreutils=y
CONFIG_PACKAGE_coreutils-chmod=y
CONFIG_PACKAGE_kmod-fuse=y

# 系统监控 & 自动维护（仅保留一次，避免重复）
CONFIG_PACKAGE_luci-app-netdata=y
CONFIG_PACKAGE_luci-app-processes=y
CONFIG_PACKAGE_logrotate=y
CONFIG_PACKAGE_kmod-logbufs=y

# SWAP虚拟内存支持
CONFIG_KERNEL_SWAP=y
CONFIG_PACKAGE_luci-app-swap=y

### PassWall配置项（按需启用，默认注释）###
#CONFIG_PACKAGE_luci-app-passwall=m
# CONFIG_PACKAGE_luci-app-passwall_Iptables_Transparent_Proxy is not set
#CONFIG_PACKAGE_luci-app-passwall_Nftables_Transparent_Proxy=m
#CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Geoview=m
#CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Haproxy=m
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Hysteria is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_NaiveProxy is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Libev_Client is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Libev_Server is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Rust_Client is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Rust_Server is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_ShadowsocksR_Libev_Client is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_ShadowsocksR_Libev_Server is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadow_TLS is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Simple_Obfs is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_SingBox is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Trojan_Plus is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_tuic_client is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_V2ray_Geodata is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_V2ray_Plugin is not set
#CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Xray=m
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Xray_Plugin is not set

# TCP/IP栈 & 连接数优化（适配Alist远程访问）
CONFIG_KERNEL_TCP_CONG_BBR=y
CONFIG_KERNEL_NET_SCH_CBQ=y
CONFIG_PACKAGE_kmod-ipt-nat6=m  # 无IPv6需求设为m，减少体积
CONFIG_PACKAGE_kmod-nf-nathelper=y
CONFIG_KERNEL_NF_CONNTRACK_MAX=65535
CONFIG_PACKAGE_kmod-nf-conntrack-extra=y
